"use strict";(self.webpackChunkchatgpt_api=self.webpackChunkchatgpt_api||[]).push([[929],{21782:(b,m,l)=>{l.d(m,{Al:()=>h,dy:()=>p});var o=l(15861),f=l(74010);class c{constructor(t){Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=t}toString(){return this.value}toChatMessages(){return[new f.Z(this.value)]}}class p{constructor(t){Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:e}=t;if(e.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,t)}mergePartialAndUserVariables(t){var e=this;return(0,o.Z)(function*(){const n=e.partialVariables??{},r={};for(const[u,d]of Object.entries(n))r[u]="string"==typeof d?d:yield d();return{...r,...t}})()}static deserialize(t){return(0,o.Z)(function*(){switch(t._type){case"prompt":{const{PromptTemplate:e}=yield Promise.resolve().then(l.bind(l,194));return e.deserialize(t)}case void 0:{const{PromptTemplate:e}=yield Promise.resolve().then(l.bind(l,194));return e.deserialize({...t,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:e}=yield l.e(811).then(l.bind(l,80811));return e.deserialize(t)}default:throw new Error(`Invalid prompt type in config: ${t._type}`)}})()}}class h extends p{formatPromptValue(t){var e=this;return(0,o.Z)(function*(){const n=yield e.format(t);return new c(n)})()}}},194:(b,m,l)=>{l.r(m),l.d(m,{PromptTemplate:()=>p});var o=l(15861),f=l(21782),c=l(33087);class p extends f.Al{constructor(i){if(super(i),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,i),this.validateTemplate){let s=this.inputVariables;this.partialVariables&&(s=s.concat(Object.keys(this.partialVariables))),(0,c.af)(this.template,this.templateFormat,s)}}_getPromptType(){return"prompt"}format(i){var s=this;return(0,o.Z)(function*(){const t=yield s.mergePartialAndUserVariables(i);return(0,c.SM)(s.template,s.templateFormat,t)})()}static fromExamples(i,s,t,e="\n\n",n=""){const r=[n,...i,s].join(e);return new p({inputVariables:t,template:r})}static fromTemplate(i,{templateFormat:s="f-string",...t}={}){const e=new Set;return(0,c.$M)(i,s).forEach(n=>{"variable"===n.type&&e.add(n.name)}),new p({inputVariables:[...e],templateFormat:s,template:i,...t})}partial(i){var s=this;return(0,o.Z)(function*(){const t={...s};return t.inputVariables=s.inputVariables.filter(e=>!(e in i)),t.partialVariables={...s.partialVariables??{},...i},new p(t)})()}serialize(){if(void 0!==this.outputParser)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static deserialize(i){return(0,o.Z)(function*(){if(!i.template)throw new Error("Prompt template must have a template");return new p({inputVariables:i.input_variables,template:i.template,templateFormat:i.template_format})})()}}},33087:(b,m,l)=>{l.d(m,{$M:()=>i,SM:()=>h,af:()=>s});const o=t=>{const e=t.split(""),n=[],r=(u,d)=>{for(let _=d;_<e.length;_+=1)if(u.includes(e[_]))return _;return-1};let a=0;for(;a<e.length;)if("{"===e[a]&&a+1<e.length&&"{"===e[a+1])n.push({type:"literal",text:"{"}),a+=2;else if("}"===e[a]&&a+1<e.length&&"}"===e[a+1])n.push({type:"literal",text:"}"}),a+=2;else if("{"===e[a]){const u=r("}",a);if(u<0)throw new Error("Unclosed '{' in template.");n.push({type:"variable",name:e.slice(a+1,u).join("")}),a=u+1}else{if("}"===e[a])throw new Error("Single '}' in template.");{const u=r("{}",a),d=(u<0?e.slice(a):e.slice(a,u)).join("");n.push({type:"literal",text:d}),a=u<0?e.length:u}}return n},c={"f-string":(t,e)=>o(t).reduce((n,r)=>{if("variable"===r.type){if(r.name in e)return n+e[r.name];throw new Error(`Missing value for input ${r.name}`)}return n+r.text},""),jinja2:(t,e)=>""},p={"f-string":o,jinja2:t=>[]},h=(t,e,n)=>c[e](t,n),i=(t,e)=>p[e](t),s=(t,e,n)=>{if(!(e in c)){const r=Object.keys(c);throw new Error(`Invalid template format. Got \`${e}\`;\n                         should be one of ${r}`)}try{const r=n.reduce((a,u)=>(a[u]="foo",a),{});h(t,e,r)}catch{throw new Error("Invalid prompt schema.")}}},74010:(b,m,l)=>{l.d(m,{Ck:()=>c,J:()=>h,K3:()=>n,MJ:()=>i,Z:()=>f,w:()=>p});class o{constructor(a){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=a}}class f extends o{_getType(){return"human"}}class c extends o{_getType(){return"ai"}}class p extends o{_getType(){return"system"}}class h extends o{constructor(a,u){super(a),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=u}_getType(){return"generic"}}class i{}class e extends Error{constructor(a){super(a)}}class n{}},15861:(b,m,l)=>{function o(c,p,h,i,s,t,e){try{var n=c[t](e),r=n.value}catch(a){return void h(a)}n.done?p(r):Promise.resolve(r).then(i,s)}function f(c){return function(){var p=this,h=arguments;return new Promise(function(i,s){var t=c.apply(p,h);function e(r){o(t,i,s,e,n,"next",r)}function n(r){o(t,i,s,e,n,"throw",r)}e(void 0)})}}l.d(m,{Z:()=>f})}}]);